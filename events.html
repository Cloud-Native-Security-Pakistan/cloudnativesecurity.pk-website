<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://cdn.jsdelivr.net https://cdn.tailwindcss.com https://images.unsplash.com; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:;">
    <title>Events - CNSPK</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#ecfdf5',
                            500: '#10b981',
                            600: '#059669',
                        },
                        dark: {
                            900: '#0a0a0a',
                            800: '#171717',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            color: #e5e5e5;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .glass-nav {
            background: rgba(5, 5, 5, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col antialiased">
    <div id="navbar"></div>

    <main class="flex-grow pt-24 pb-12">
        <!-- Header -->
        <header class="container mx-auto px-6 text-center mb-16 relative">
            <div
                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-brand-500/10 blur-[100px] rounded-full pointer-events-none">
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight relative z-10">
                Community <span class="text-brand-500">Events</span>
            </h1>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto font-light">
                Connect with the ecosystem. Workshops, meetups, and conferences.
            </p>
        </header>

        <!-- Events Grid -->
        <div class="container mx-auto px-6">
            <div id="events-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Loading State -->
                <div id="loading"
                    class="col-span-full border border-white/5 rounded-xl p-12 text-center bg-white/[0.02]">
                    <div class="flex flex-col items-center gap-4">
                        <div class="w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin">
                        </div>
                        <span class="text-gray-500 font-mono text-sm">Synchronizing event streams...</span>
                    </div>
                </div>
            </div>

            <div id="error" class="hidden col-span-full text-center py-12">
                <div class="inline-block p-6 border border-red-500/20 bg-red-900/10 rounded-lg">
                    <p class="text-red-400 mb-4">Unable to load events.</p>
                    <button onclick="window.location.reload()"
                        class="text-sm border border-red-500/50 px-4 py-2 rounded text-red-500 hover:bg-red-500 hover:text-white transition-colors">Retry</button>
                </div>
            </div>
        </div>

        <!-- CTA -->
        <section class="container mx-auto px-6 mt-24">
            <div class="glass-panel rounded-2xl p-12 text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-brand-500/5 blur-[80px] rounded-full"></div>

                <h3 class="text-2xl font-bold text-white mb-4 relative z-10">Want to host an event?</h3>
                <p class="text-gray-400 mb-8 max-w-lg mx-auto relative z-10">
                    We are always looking for speakers and venues. Help us grow the Cloud Native ecosystem in Pakistan.
                </p>
                <div class="flex gap-4 justify-center relative z-10">
                    <a href="https://github.com/cloudnativesecurity-pk/events/issues/new"
                        class="px-6 py-3 bg-brand-600 hover:bg-brand-500 text-white font-semibold rounded-lg transition-all shadow-lg hover:shadow-brand-500/20">
                        Submit a Proposal
                    </a>
                    <a href="mailto:hi@cloudnativesecurity.pk"
                        class="px-6 py-3 border border-white/10 hover:bg-white/5 text-gray-300 rounded-lg transition-colors">
                        Contact Us
                    </a>
                </div>
            </div>
        </section>
    </main>

    <div id="footer"></div>

    <script type="module">
        import { EventCard } from './js/EventCard.js';
        import { Navbar } from './js/Navbar.js';
        import { Footer } from './js/Footer.js';
        import { fetchData, domReady } from './js/utils.js';

        new Navbar().init();
        new Footer().init();

        async function loadEvents() {
            const container = document.getElementById('events-container');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');

            try {
                const events = await fetchData('./data/events.json');
                loading.classList.add('hidden');

                if (!events || events.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-20">
                            <p class="text-gray-500">No events scheduled at the moment.</p>
                        </div>
                    `;
                    return;
                }

                const sortedEvents = events.sort((a, b) => new Date(b.date) - new Date(a.date));

                container.innerHTML = sortedEvents.map(event => {
                    const card = new EventCard(event);
                    return card.render();
                }).join('');

            } catch (err) {
                console.error('Events Error:', err);
                loading.classList.add('hidden');
                error.classList.remove('hidden');
            }
        }

        domReady(loadEvents);
    </script>
</body>

</html>