<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https://cdn.jsdelivr.net https://cdn.tailwindcss.com https://images.unsplash.com https://avatars.githubusercontent.com https://ui-avatars.com https://www.youtube.com; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; frame-src https://www.youtube.com;">

    <!-- SEO Meta Tags -->
    <title>Sessions - Cloud Native Security Pakistan | Online Talks & Recordings</title>
    <meta name="description"
        content="Watch cloud-native security sessions from CNSPK speakers. Learn about Kubernetes security, DevSecOps, container security, and more from Pakistan's premier cloud security community.">
    <meta name="keywords"
        content="cloud native security sessions, Kubernetes security talks, DevSecOps webinars, container security, CNCF Pakistan, cloud security training">
    <meta name="author" content="Cloud Native Security Pakistan">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Sessions - Cloud Native Security Pakistan">
    <meta property="og:description"
        content="Watch cloud-native security sessions from CNSPK speakers. Expert talks on Kubernetes, DevSecOps, and container security.">
    <meta property="og:url" content="https://cloudnativesecurity.pk/sessions/">
    <meta property="og:site_name" content="Cloud Native Security Pakistan">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sessions - CNSPK">
    <meta name="twitter:description"
        content="Watch cloud-native security sessions from expert speakers in Pakistan's premier cloud security community.">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="https://cloudnativesecurity.pk/sessions/">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        brand: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            500: '#10b981',
                            600: '#059669',
                            900: '#064e3b',
                        },
                        dark: {
                            900: '#0a0a0a',
                            800: '#171717',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            color: #e5e5e5;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .glass-nav {
            background: rgba(5, 5, 5, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .filter-btn.active {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border-color: rgba(16, 185, 129, 0.5);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col antialiased selection:bg-brand-500/30 selection:text-brand-500">
    <div id="navbar"></div>

    <main class="flex-grow pt-24 pb-12">
        <!-- Header -->
        <header class="container mx-auto px-6 text-center mb-12 relative">
            <div
                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-72 h-72 bg-brand-500/10 blur-[120px] rounded-full pointer-events-none">
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight relative z-10">
                Community <span class="text-brand-500">Sessions</span>
            </h1>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto font-light">
                Watch recordings from our expert speakers on Kubernetes security, DevSecOps, and cloud-native best
                practices.
            </p>
        </header>

        <!-- Filter Tabs -->
        <div class="container mx-auto px-6 mb-10">
            <div class="flex justify-center gap-3">
                <button
                    class="filter-btn active px-5 py-2 rounded-full border border-white/10 text-sm font-medium transition-all hover:border-brand-500/50"
                    data-filter="all">
                    All Sessions
                </button>
                <button
                    class="filter-btn px-5 py-2 rounded-full border border-white/10 text-gray-400 text-sm font-medium transition-all hover:border-brand-500/50 hover:text-white"
                    data-filter="upcoming">
                    Upcoming
                </button>
                <button
                    class="filter-btn px-5 py-2 rounded-full border border-white/10 text-gray-400 text-sm font-medium transition-all hover:border-brand-500/50 hover:text-white"
                    data-filter="recorded">
                    Recorded
                </button>
            </div>
        </div>

        <!-- Sessions Grid -->
        <div class="container mx-auto px-6">
            <div id="sessions-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Loading State -->
                <div id="loading"
                    class="col-span-full border border-white/5 rounded-xl p-12 text-center bg-white/[0.02]">
                    <div class="flex flex-col items-center gap-4">
                        <div class="w-8 h-8 border-2 border-brand-500 border-t-transparent rounded-full animate-spin">
                        </div>
                        <span class="text-gray-500 font-mono text-sm">Loading sessions...</span>
                    </div>
                </div>
            </div>

            <div id="error" class="hidden col-span-full text-center py-12">
                <div class="inline-block p-6 border border-red-500/20 bg-red-900/10 rounded-lg">
                    <p class="text-red-400 mb-4">Unable to load sessions.</p>
                    <button onclick="window.location.reload()"
                        class="text-sm border border-red-500/50 px-4 py-2 rounded text-red-500 hover:bg-red-500 hover:text-white transition-colors">Retry</button>
                </div>
            </div>
        </div>

        <!-- CTA -->
        <section class="container mx-auto px-6 mt-24">
            <div class="glass-panel rounded-2xl p-12 text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-brand-500/5 blur-[80px] rounded-full"></div>
                <div class="absolute bottom-0 left-0 w-48 h-48 bg-amber-500/5 blur-[60px] rounded-full"></div>

                <div class="relative z-10 flex items-center justify-center gap-2 mb-4">
                    <svg class="w-8 h-8 text-amber-400" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z" />
                    </svg>
                    <h3 class="text-2xl font-bold text-white">Become a Speaker</h3>
                </div>
                <p class="text-gray-400 mb-8 max-w-lg mx-auto relative z-10">
                    Share your expertise with the community. Get your own speaker trophy page and help others learn
                    cloud-native security.
                </p>
                <div class="flex gap-4 justify-center relative z-10 flex-wrap">
                    <a href="https://github.com/cloudnativesecurity-pk/sessions/issues/new"
                        class="px-6 py-3 bg-brand-600 hover:bg-brand-500 text-white font-semibold rounded-lg transition-all shadow-lg hover:shadow-brand-500/20">
                        Submit a Talk
                    </a>
                    <a href="mailto:hi@cloudnativesecurity.pk"
                        class="px-6 py-3 border border-white/10 hover:bg-white/5 text-gray-300 rounded-lg transition-colors">
                        Contact Us
                    </a>
                </div>
            </div>
        </section>
    </main>

    <div id="footer"></div>

    <script type="module">
        import { SessionCard } from '../js/SessionCard.js';
        import { Navbar } from '../js/Navbar.js';
        import { Footer } from '../js/Footer.js';
        import { fetchData, domReady } from '../js/utils.js';

        new Navbar().init();
        new Footer().init();

        let allSessions = [];

        async function loadSessions() {
            const container = document.getElementById('sessions-container');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');

            try {
                allSessions = await fetchData('../data/sessions.json');
                loading.classList.add('hidden');

                if (!allSessions || allSessions.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-20">
                            <p class="text-gray-500">No sessions available at the moment.</p>
                        </div>
                    `;
                    return;
                }

                renderSessions(allSessions);
                setupFilters();

            } catch (err) {
                console.error('Sessions Error:', err);
                loading.classList.add('hidden');
                error.classList.remove('hidden');
            }
        }

        function renderSessions(sessions) {
            const container = document.getElementById('sessions-container');
            const sorted = sessions.sort((a, b) => new Date(b.date) - new Date(a.date));

            container.innerHTML = sorted.map(session => {
                const card = new SessionCard(session);
                return card.render();
            }).join('');
        }

        function setupFilters() {
            const buttons = document.querySelectorAll('.filter-btn');

            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    buttons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');

                    const filter = btn.dataset.filter;
                    let filtered = allSessions;

                    if (filter === 'upcoming') {
                        filtered = allSessions.filter(s => s.type === 'upcoming');
                    } else if (filter === 'recorded') {
                        filtered = allSessions.filter(s => s.type === 'recorded');
                    }

                    if (filtered.length === 0) {
                        document.getElementById('sessions-container').innerHTML = `
                            <div class="col-span-full text-center py-20">
                                <p class="text-gray-500">No ${filter} sessions at the moment.</p>
                            </div>
                        `;
                    } else {
                        renderSessions(filtered);
                    }
                });
            });
        }

        domReady(loadSessions);
    </script>
</body>

</html>